{{define "content"}}
<div class="container artists-page">
    <div class="page-header">
        <h1 class="page-title">{{if .Title}}{{.Title}}{{else}}Artistes{{end}}</h1>
        <p class="page-subtitle">D√©couvrez une s√©lection d'artistes populaires</p>
    </div>

    <section class="controls-section">
        <div class="search-container">
            <form action="/search" method="GET" autocomplete="off" class="search-form">
                <div class="search-input-wrapper">
                    <input type="text" id="search-input" name="q" class="search-input"
                           placeholder="Rechercher un artiste..."
                           value="{{if .Query}}{{.Query}}{{end}}">
                    <div id="suggestions-box" class="suggestions-box"></div>
                    <button type="submit" class="btn-search" aria-label="Rechercher">
                        <span>üîç</span>
                    </button>
                </div>
            </form>
        </div>

        <div class="filters-wrapper">
            <div class="filters-header">
                <h2 class="filters-title">üîç Filtres</h2>
                <button type="button" class="filters-toggle">
                    <span class="filters-toggle-icon">‚ñº</span>
                </button>
            </div>
            <form action="{{if .Query}}/search{{else}}/artists{{end}}" method="GET" class="filter-form filters-content" id="filter-form">
                {{if .Query}}<input type="hidden" name="q" value="{{.Query}}">{{end}}
                <div class="filter-grid">
                    <div class="filter-section">
                        <h3 class="filter-section-title">üìÖ Date de cr√©ation</h3>
                        <div class="filter-input-group">
                            <label for="minYear">De</label>
                            <input type="number" id="minYear" name="minYear" placeholder="1990" value="{{if .MinYear}}{{.MinYear}}{{end}}" min="1900" max="2030" class="filter-input-number">
                        </div>
                        <div class="filter-input-group">
                            <label for="maxYear">√Ä</label>
                            <input type="number" id="maxYear" name="maxYear" placeholder="2020" value="{{if .MaxYear}}{{.MaxYear}}{{end}}" min="1900" max="2030" class="filter-input-number">
                        </div>
                    </div>

                    <div class="filter-section">
                        <h3 class="filter-section-title">üíø Premier album</h3>
                        <div class="filter-input-group">
                            <label for="firstAlbumMin">Depuis</label>
                            <input type="text" id="firstAlbumMin" name="firstAlbumMin" placeholder="2000-01-01" value="{{if .FirstAlbumMin}}{{.FirstAlbumMin}}{{end}}" pattern="[0-9]{4}(-[0-9]{2}(-[0-9]{2})?)?" class="filter-input-date">
                        </div>
                        <div class="filter-input-group">
                            <label for="firstAlbumMax">Jusqu'√†</label>
                            <input type="text" id="firstAlbumMax" name="firstAlbumMax" placeholder="2020-12-31" value="{{if .FirstAlbumMax}}{{.FirstAlbumMax}}{{end}}" pattern="[0-9]{4}(-[0-9]{2}(-[0-9]{2})?)?" class="filter-input-date">
                        </div>
                    </div>

                    <div class="filter-section">
                        <h3 class="filter-section-title">üë• Nombre de membres</h3>
                        <div class="filter-checkbox-group">
                            <label class="filter-checkbox">
                                <input type="checkbox" name="memberCount" value="1" {{if .Member1}}checked{{end}}>
                                <span>1 (Solo)</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" name="memberCount" value="2" {{if .Member2}}checked{{end}}>
                                <span>2</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" name="memberCount" value="3" {{if .Member3}}checked{{end}}>
                                <span>3</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" name="memberCount" value="4" {{if .Member4}}checked{{end}}>
                                <span>4</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" name="memberCount" value="5" {{if .Member5}}checked{{end}}>
                                <span>5+</span>
                            </label>
                        </div>
                    </div>

                    {{if .Locations}}
                    <div class="filter-section">
                        <h3 class="filter-section-title">üìç Lieux</h3>
                        <select id="location" name="location" multiple class="filter-select-multi">
                            {{range .Locations}}
                            <option value="{{.}}" {{if index $.LocationSelected .}}selected{{end}}>{{.}}</option>
                            {{end}}
                        </select>
                        <small class="filter-hint">Maintenez Ctrl/Cmd pour s√©lectionner plusieurs lieux</small>
                    </div>
                    {{end}}

                    <div class="filter-actions">
                        <button type="submit" class="btn-filter-apply">Appliquer les filtres</button>
                        <a href="{{if .Query}}/search?q={{.Query}}{{else}}/artists{{end}}" class="btn-filter-reset">R√©initialiser</a>
                    </div>
                </div>
            </form>
        </div>
    </section>

    {{if .APIError}}
    <div class="error-banner">
        <p class="error-title">‚ö†Ô∏è Impossible de charger les artistes</p>
        <p class="error-desc">V√©rifiez <strong>SPOTIFY_CLIENT_ID</strong> et <strong>SPOTIFY_CLIENT_SECRET</strong>.</p>
    </div>
    {{end}}

    <div class="artists-grid">
        {{if .Artists}}
            {{range .Artists}}
            <article class="artist-card">
                <div class="artist-card-image">
                    {{if .Image}}
                    <img src="{{.Image}}" alt="{{.Name}}" loading="lazy">
                    {{else}}
                    <div class="artist-card-noimg">üéµ</div>
                    {{end}}
                    <div class="artist-card-overlay">
                        <a href="/artist/{{.ID}}" class="btn-details-card">Voir la fiche ‚Üí</a>
                    </div>
                </div>
                <div class="artist-card-content">
                    <h2 class="artist-name">{{.Name}}</h2>
                    <div class="artist-card-meta">
                        {{if .CreationDate}}
                        <div class="meta-item">
                            <span class="meta-icon">üìÖ</span>
                            <span>{{.CreationDate}}</span>
                        </div>
                        {{end}}
                        {{if .Genres}}
                        <div class="meta-item">
                            <span class="meta-icon">üéµ</span>
                            <span>{{index .Genres 0}}</span>
                        </div>
                        {{end}}
                    </div>
                    {{if .FirstAlbum}}
                    <div class="artist-album">
                        <span class="album-label">Premier album:</span>
                        <span class="album-name">{{.FirstAlbum}}</span>
                    </div>
                    {{end}}
                </div>
            </article>
            {{end}}
        {{else}}
            <div class="artists-empty">
                <div class="empty-icon">üé≠</div>
                <h3>Aucun artiste trouv√©</h3>
                <p>Modifiez la recherche ou les filtres, ou <a href="/artists">affichez tous les artistes</a>.</p>
            </div>
        {{end}}
    </div>
</div>
{{end}}
