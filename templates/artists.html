{{define "content"}}
<div class="container">
    <h1 class="fade-in-on-scroll" style="font-family: 'Playfair Display', serif; font-size: clamp(2rem, 4vw, 3rem); color: var(--text-primary); margin-bottom: 2rem; text-align: center; font-weight: 700;">{{.Title}}</h1>

    <section class="controls-section fade-in-on-scroll">
        <div class="search-container">
            <form action="/search" method="GET" autocomplete="off">
                <input type="text" id="search-input" name="q" class="search-input" 
                       placeholder="üîç Rechercher un artiste ou un membre..." 
                       value="{{if .Query}}{{.Query}}{{end}}">
                <div id="suggestions-box" class="suggestions-box"></div>
                <button type="submit" class="btn-search" style="margin-top: 1rem; width: 100%;">Rechercher</button>
            </form>
        </div>
        
        <form action="/artists" method="GET" class="filter-form" style="margin-top: 2rem;">
            <div class="filter-group">
                <label>Ann√©e de cr√©ation (min)</label>
                <input type="number" name="minYear" placeholder="Ex: 1950" value="{{.MinYear}}" min="1900" max="2024">
            </div>
            
            <div class="filter-group">
                <label>Ann√©e de cr√©ation (max)</label>
                <input type="number" name="maxYear" placeholder="Ex: 2000" value="{{.MaxYear}}" min="1900" max="2024">
            </div>
            
            <div class="filter-group">
                <label>Nombre de membres</label>
                <select name="memberCount" multiple style="min-height: 100px;">
                    <option value="1" {{if .Member1}}selected{{end}}>1 membre</option>
                    <option value="2" {{if .Member2}}selected{{end}}>2 membres</option>
                    <option value="3" {{if .Member3}}selected{{end}}>3 membres</option>
                    <option value="4" {{if .Member4}}selected{{end}}>4 membres</option>
                    <option value="5" {{if .Member5}}selected{{end}}>5+ membres</option>
                </select>
            </div>
            
            {{if .Locations}}
            <div class="filter-group">
                <label>Lieux de concerts</label>
                <select name="location" multiple style="min-height: 150px;">
                    {{range .Locations}}
                    <option value="{{.}}" {{if index $.LocationSelected .}}selected{{end}}>{{.}}</option>
                    {{end}}
                </select>
            </div>
            {{end}}
            
            <div class="filter-group">
                <button type="submit" class="btn-filter">üîç Filtrer</button>
                <a href="/artists" class="btn-back" style="margin-top: 0.5rem; display: block; text-align: center;">R√©initialiser</a>
            </div>
        </form>
        
        <div style="margin-top: 1.5rem; text-align: center;">
            <a href="/artists" class="btn-filter">‚ú® Voir tous les artistes</a>
        </div>
    </section>

    {{if .APIError}}
    <div class="controls-section" style="margin-bottom: 2rem;">
        <p style="color: var(--text-secondary); text-align: center; margin-bottom: 0.5rem;">‚ö†Ô∏è Impossible de charger les artistes.</p>
        <p style="font-size: 0.9rem; color: var(--text-tertiary); text-align: center;">V√©rifiez <strong>SPOTIFY_CLIENT_ID</strong> et <strong>SPOTIFY_CLIENT_SECRET</strong> (variables d'environnement ou api/spotify.go).</p>
    </div>
    {{end}}
    <div class="artists-grid">
        {{if .Artists}}
            {{range .Artists}}
            <article class="artist-card fade-in-on-scroll">
                {{if .Image}}
                    <img src="{{.Image}}" alt="{{.Name}}" loading="lazy">
                {{else}}
                    <div style="width: 100%; height: 280px; background: var(--bg-tertiary); display: flex; align-items: center; justify-content: center; color: var(--text-secondary);">
                        Pas d'image
                    </div>
                {{end}}
                
                <h2 class="artist-name">{{.Name}}</h2>
                
                <div style="padding: 0 1rem; margin-bottom: 0.5rem;">
                    {{if .CreationDate}}
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0.5rem 0;">
                        <strong>Ann√©e de cr√©ation:</strong> {{.CreationDate}}
                    </p>
                    {{end}}
                    {{if .Members}}
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0.5rem 0;">
                        <strong>Membres:</strong> {{len .Members}}
                    </p>
                    {{end}}
                    {{if .FirstAlbum}}
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0.5rem 0;">
                        <strong>Premier album:</strong> {{.FirstAlbum}}
                    </p>
                    {{end}}
                </div>

                <a href="/artist/{{.ID}}" class="btn-details">Voir d√©tails</a>
            </article>
            {{end}}
        {{else}}
            <div class="text-center" style="grid-column: 1 / -1; padding: 3rem; background: var(--bg-secondary); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); border: 1px solid var(--border-color);">
                <p style="font-size: 1.2rem; color: var(--text-secondary);">Aucun artiste trouv√©. Essayez une autre recherche ou modifiez les filtres !</p>
            </div>
        {{end}}
    </div>
</div>
{{end}}
